---
title: "最強のCSS設計  Chapter02"
emoji: "🧐"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: ["css"]
published: false
---

# Chapter02 CSS設計のためのさまざまな手法

## 02-01 OOCSS

### OOCSSの概要

OOCSS (Object Oriented CSS)
- 「オブジェクト指向」の概念をCSSに取り入れた構成案
- SMACSS, BEM, FLOCSSなど多くのCSS構成案に影響を与えた
- **CSS設計を理解する上で、まず初めに学ぶべきCSS構成案**

OOCSSでは、

- Webページを構成するボタンやアイコンなどの部品をオブジェクトと呼ぶ
- このオブジェクトを2つの原則に則って「分離」する

ことが重要なポイント。

#### Separate structure and skin

1つ目の原則は、Separate structure and skin (**「ストラクチャー」と「スキン」に分離する**)。
オブジェクトの**構造**を作る部分をストラクチャー、**見た目**を作る部分をスキンと呼ぶ。
それぞれに対応するクラスとスタイルを用意し、これを組み合わせることで、1つのオブジェクトを作っていく。

#### Separate container and content

2つ目の原則は、Separate container and content (**「コンテナー」と「コンテント」に分離する**)。
複数の要素からなるオブジェクトは、それを構成する要素であるコンテントと、それらを1つにまとめるコンテナーに分離して構築する。

個々のオブジェクトが独立して存在できるように組んでおくことで、異なるシーンで似たようなオブジェクトが必要になった場合に再利用できる。

### OOCSSのメリットとデメリット

#### メリット  再利用性・拡張性に優れる

- オブジェクト単位でコーディングを行うことで、一度組んだオブジェクトを何度も再利用できる
- 複数のクラスを組み合わせることで、ベースとなるオブジェクトを起点に用意にバリエーションを増やしていける拡張性

#### メリット  CSSの記述が減る

OOCSSに則ってCSSを書けば、自ずとCSSの記述量が減る。
これはオブジェクトを再利用、拡張することを前提に考えているため、同じようなオブジェクトを構築する際に一度の記述、あるいはそれに+αするだけで作ることができるから。
また、CSSの記述が減ることは、開発スピードの向上やCSSのロード時間短縮にもつながる。

#### メリット  どんなプロジェクトにも導入しやすい

OOCSSには厳格な縛りがないため、柔軟に取り入れることができる。
例えば、クラスの命名規則には独自のやり方を採用してもいいし、SMACSSのような他のCSS構成案と併用することもできる。

#### デメリット 導入するには工夫が必要

OOCSS自体は抽象的なアイデアとしての要素が強いため、そのまま導入することはできない。
例えば、HTMLに対してどんな命名規則でクラス名を振るかなど、具体的にどう実務に取り入れるかは個々の開発者に委ねられる。￥


## 02-02 SMACSS

### SMACSSの概要

SMACSSがカバーする範囲は広い。
クラスの命名規則やディレクトリ構成、JavaScriptの扱い、CSSメタ言語をもいいた場合の実装方法など。
実際に現場で必要とされるコーディングの様々なノウハウが凝縮されている。
その中でもSMACSSにおいて特に重要なのは、**CSSをカテゴライズする**という考え方。

SMACSSでは、CSSを以下の5つのカテゴリに分類して考える。

| カテゴリ | 解説 |
| ---- | ---- |
| Base | そのWebサイト/アプリケーションにおける基本となるスタイル。normalize.cssのようなスタイルの他、基本となるフォントサイズやリンクカラーなど |
| Layout | ヘッダー、フッター、カラムといった、Webページのレイアウトを決定する要素 |
| Module | Webページを構成するパーツ。ボタン、タブ、商品リストなど |
| State | JavaScriptの操作によって変更するModuleの見た目。アクティブ状態のタブボタンなど |
| Theme | テーマに応じてWebページ全体、または一部の見た目を変えるスタイル |

闇雲にCSSを描くのではなく、このようにCSSをカテゴライズし、それに応じたファイル構成にしておくことで、開発や運用時にソースコードの混乱を回避できる。
また、この考えは後に多くのCSS構成案で取り入れられるようになった。

### SMACSSのメリット・デメリット

#### メリット  CSSに"秩序"を与えることが可能に

CSSをカテゴライズするという方法を取り入れたことで、SMACSSはCSSに秩序を与えたと言える。
これにより、ソース上だけでなくより広い範囲、例えば**ディレクトリ構造**なども設計できるようになった。
開発者は追記したいCSSをどこに置くべきか、また編集したいCSSがどこにあるのかを容易に推測することができる。

#### メリット  ルールが柔軟で応用しやすい

SMACSSはそこに書いてある内容全てを使う必要はなく、一部だけを用いたり、アレンジを加えるなどして使うこともできる。
特にOOCSSとは共通する点も多いため、組み合わせて使うには相性が良い。

#### デメリット  ルールが緩い

自由度が髙いことはSMACSSの良い部分でもあるが、それゆえ厳格性が高いとはいえない。
例えば、クラスの命名規則に関して、SMACSSはLayoutに分類される要素には`l-`, `layout-`, `grid-`などのプレフィックスをつけることを提案しているが、明確にこれと決まっているわけではない。
そのため、そのまま用いると一貫した書き方のソースコードを保つのが難しくなる。
利用する際にはSMACSSに沿いつつも、どのような命名ルールで運用するかなど、開発者間で取り決める必要がある。


## 02-03 BEM

### BEMの概要

BEMは**Webサイト/アプリケーション開発のためのCSS構成案とそれを実現するツール**のことを指す。
通常はシステムそのものよりも、その中で用いられているCSS構成案を指すことが多い。
ツールには「BEM Tools」と名付けられ、公式サイトやGitHub上でも公開されている。

> BEM Tools
> https://github.com/bem/bem-tools

BEMもSMACSSのようにCSSをカテゴライズするという特徴を持つが、SMACSSのそれとは違い、BEMでは**Block, Element, Modifireの3つに分ける**方法を用いる。

| カテゴリ | 解説 |
| ---- | ---- |
| Block | Webページを構成するパーツ。ボタンや検索モジュール、ヘッダーなどを含む |
| Element | Blockを構成する要素。必ずBlockにない表される形で用いられる |
| Modifier | BlockやElementの見た目を変える要素 |

加えて、BEMにはOOCSSの思想との類似性が多く確認できる。
例えば、OOCSSはWebページを構成するパーツをオブジェクトと呼び、再利用することを前提に構築するものとしているが、これはBEMにおけるBlockの考え方にとてもよく似ている。

OOCSSにおけるスキンとBEMにおけるModifierは非常に近い概念。
OOCSS自体は抽象的な概念である側面が強く、クラスの命名規則などの実践的な内容までは含まれていないが、BEMはこれを実現するための**具体的な手法**と言える。

### BEMのメリット・デメリット

#### メリット  ソースコードの統一性を保つ

BEMには厳格な命名規則が存在するため、複数人での開発や長期に渡って運用するプロジェクトにおいても、一貫した書き方でソースコードを保ちやすくなる。

#### メリット  スタイルの汚染を防ぐ

BEMのルールに則って記述すれば、必然的にクラス名は長くなる。
また、ElementやModifierはBlockの名前を継承する。
よって、クラス名およびスタイルのバッティング防ぎやすくなる。

#### メリット  HTML構造が明確になる

BEMではElementやModifierはBlockの名前を、またModierはBlockやElementの名前を継承する、という特徴を持つ。
よって、クラス名を見ればHTML上でもそれぞれの要素がどう関係し合っているのか理解できる。

#### メリット  再利用性・拡張性に優れる

BEMにおけるBlockは異なるシーンで何度も利用することを想定された概念なので、再利用性に優れる。
また、Modifierによって見た目のバリエーションも容易に増やせるため、拡張性にも優れる。

#### デメリット  開発スピードが遅くなる

BEMはルールが厳格ゆえに、それを意識してマークアップを行うとなれば開発スピードが落ちる可能性がある。
また、BEMの命名ルールに沿うとクラス名は必然的に長くなるため、タイピング量も増える。

#### デメリット  支持を得にくい

BEMを知らないデザイナーやエンジニアからすると、その独特な命名ルールに初のうちは違和感を覚えるかもしれない。
しかし、メリットの項目で述べたように、BEMのルールにはそれを守ってコーディングするだけの価値がある。
そのため、もしBEMを知らないメンバーが開発チームにいる場合は、BEMのメリットを十分に知ってもらうと良いだろう。

## 02-04 FLOCSS

### FLOCSSの概要

FLOCSSは、OOCSS, SMACSS, BEM, SUIT CSS, MCSSといった複数のアイデアを融合し、まとめた内容になっている。

FLOCSSには特に重要な特徴が２つある。

### CSSのカテゴライズ

FLOCSSでは、CSSをFoundation, Layout, Objectの３つのカテゴリに分類する。
また、Objectの下にも３つの小カテゴリが存在する。

| 大カテゴリ | 小カテゴリ | 解説 |
| ---- | ---- | ---- |
| Foundation |  | そのWebサイト/アプリケーションにおける基本となるスタイル |
| Layout |  | ヘッダー、フッター、カラムといった、Webページのレイアウトを決定する要素 |
| Object | Component | Webページを構成するパーツ。様々なシーンで再利用することを前提とした、ボタンやアイコンなどの最低限の機能を持った小さな要素。 |
|  | Project | Componentよりも大きい固有のパーツ。記事一覧や、ユーザープロフィール、画像ギャラリーなど |
|  | Utility | わずかなスタイルの調整のために使うクラスを定義する他、clearfixのような汎用的に使うクラスもここで定義する |

また、Objectのバリエーション違いを作るさには、BEMのアイデアであるModifierやSMACSSのStateに則った方法を用いる。

#### レイヤー

この分類がSMACSSのそれと異なる最大の点は、これらのカテゴリが並列ではなく、**レイヤー（層）を持って分かられている**という点にある。
FLOCSSには以下のような記述がある。

> FLOCSSでは、後ろのレイヤーになるほど具体的になり、カスケーディングにおいて強いルールである必要がある。
> そのため、レイヤーの順序を前後させてはいけない。

レイヤーはCSSの優先度に影響する。
このルールを用いることで、カスケーディングによるスタイルの汚染を防ぐことにつながる。

### FLOCSSのメリット・デメリット

#### メリット ルールが厳格でまとまっている

FLOCSSは様々なCSS構成案の良い部分を取り入れているため、CSS設計を考える上で必要な要素があらかた揃っている。
例えば、BEMではプロジェクト全体のディレクトリ構造までは語られないし、SMACSSには細かい命名ルールはないが、FLOCSSではこれらの欠点が補われている。
そのため、他のCSS構成案と比べると、アレンジなど加えずともそのままプロジェクトに用いることができる。

#### メリット ドキュメントがわかりやすい

考案者が日本人のため、原本が日本語で私たち日本人にとっては分かりやすいドキュメントとなっている。

#### デメリット より多くの学習コストがかかる

様々なアイデアを取り入れているがために、FLOCSSを理解するにはそれ相応の時間を要するかもしれない。
前提として、少なくともOOCSS, SMACSS, BEMの知識は持っておいた方が望ましいだろう。


## 02-05 その他派生系メソッド

先に紹介した４つ以外にも、構成案として有力なものが複数存在する。
しかし、それらのCSS構成案はGitHubなどの場で一定の評価は受けているものの、ドキュメントが不十分で合ったり、日本では先のOOCSSやBEMなどに比べるとあまり浸透していないため、紹介程度に留めたい。

### MCSS

MCSSは、公式ではBEMとOOCSSの原理を元に作られた案で、小〜大規模プロジェクトまで幅広く導入できるとしている。
「レイヤー構造」の概念を取り入れてCSSをカテゴライズする、という特徴を持つ。

> MCSS Multilayer CSS
> http://operatino.github.io/MCSS/ja/

### SUIT CSS

SUIT CSSは、BEMとSMACSSをアレンジした命名規則を取り入れたり、Utilityと呼ばれる汎用クラスの積極的な利用を推奨している、といった特徴がある。

> SUIT CSS: style tools for UI components
> https://suitcss.github.io/

### MVCSS

MVCSSは、SMACSS, OOCSS, BEMのアイデアを取り入れており、ツールはGrunt.js, Sassの使用を前提としている。

> Overview / MVCSS
> http://mvcss.io/

### ITCSS

ITCSSは、MCSSやFLOCSSにあるようなレイヤー構造の考えを取り入れたCSSのカテゴライズを行っており、これらのカテゴリをプロジェクトの規模によって柔軟に変更できるという特徴を持っている。

> itcss, from CSS Wizardry
> http://itcss.io/
> https://speakerdeck.com/dafed/managing-css-projects-with-itcss

